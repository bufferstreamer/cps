<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cps.shop.mapper.SalesForecastShopMapper">

    <resultMap type="SalesForecastShop" id="SalesForecastResult">
            <result property="id" column="id"/>
            <result property="productId" column="product_id"/>
            <result property="goodName" column="good_name"/>
            <result property="salesForecast1" column="sales_forecast_1"/>
            <result property="salesForecast2" column="sales_forecast_2"/>
    </resultMap>

    <sql id="selectSalesForecastVo">
        select id, product_id, good_name,sales_forecast_1, sales_forecast_2
        from sales_forecast
    </sql>

    <insert id="insertSalesForecast" parameterType="SalesForecastShop" useGeneratedKeys="true"
            keyProperty="id">
        insert into sales_forecast
        <trim prefix="(" suffix=")" suffixOverrides=",">
                    <if test="productId != null">product_id,
                    </if>
                    <if test="goodName != null">good_name,
                    </if>
                    <if test="salesForecast1 != null">sales_forecast_1,
                    </if>
                    <if test="salesForecast2 != null">sales_forecast_2,
                    </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
                    <if test="productId != null">#{productId},
                    </if>
                    <if test="goodName != null">#{goodName},
                    </if>
                    <if test="salesForecast1 != null">#{salesForecast1},
                    </if>
                    <if test="salesForecast2 != null">#{salesForecast2},
                    </if>
        </trim>
    </insert>

    <update id="updateSalesForecast" parameterType="SalesForecastShop">
        update sales_forecast
        <trim prefix="SET" suffixOverrides=",">
                    <if test="productId != null">product_id =
                        #{productId},
                    </if>
                    <if test="goodName != null">good_name =
                        #{goodName},
                    </if>
                    <if test="salesForecast1 != null">sales_forecast_1 =
                        #{salesForecast1},
                    </if>
                    <if test="salesForecast2 != null">sales_forecast_2 =
                        #{salesForecast2},
                    </if>
        </trim>
        where id = #{id}
    </update>

    <update id="updateSalesForecastName" parameterType="SalesForecastShop">
        update sales_forecast
        set good_name = #{goodName}
        where product_id = #{productId}
    </update>


    <delete id="deleteSalesForecastByProductId" parameterType="long">
        delete
        from sales_forecast where cps.sales_forecast.product_id = #{productId}
    </delete>

</mapper>